<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>문화충전</title>
    <link rel="stylesheet" href="assets/css/reset.min.css">
    <link rel="stylesheet" href="assets/css/style.min.css">
    <link rel="stylesheet" href="assets/css/inc.min.css">
    <link rel="shortcut icon" href="assets/favicon/bolt-solid.ico">
    <script src="https://kit.fontawesome.com/4691863309.js" crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <div data-include="./culture/inc/header.html"></div>
    </header>

    <main>
        <section class="up-section">
            <div class="search_form">
                <form id="searchForm" name="searchForm">
                    <fieldset>
                        <span class="search_select">
                            <select name="search_genre" id="search_genre">
                                <option value="genre">장르</option>
                                <option value="dancing">무용</option>
                                <option value="musical">뮤지컬</option>
                                <option value="theater">연극</option>
                                <option value="opera">오페라</option>
                                <option value="concert">콘서트</option>
                                <option value="classic">클래식</option>
                                <option value="etc">기타</option>
                            </select>
                        </span>

                        <span class="search">
                            <input type="text" placeholder="검색어를 입력하세요">
                            <button type="button">
                                <i class="fa-solid fa-magnifying-glass">검색</i>
                            </button>
                        </span>
                    </fieldset>
                </form>
            </div>
            <div class="box1">
                <div id="map" style="width:100%; height: 300px;">
                    
                </div>
                <div class="detail">
                    상세정보창
                </div>
            </div>
        </section>

        <section class="down-section">
            <div class="div1">

            </div>
        </section>
    </main>

    <footer>
        <div data-include="./culture/inc/header.html"></div>
    </footer>

    <script src="../node_modules/axios/dist/axios.min.js"></script>
    <script type="module">
        //공연목록
        (async()=>
        {
            let json=null;

            try
            {
                const response=await axios.get("http://localhost:3001/response");
                json=response.data.body.items.item;
                //console.log(json)
            }
            catch(e)
            {
                console.error(e);
                alert("요청을 처리하는데 실패했습니다.");
                return;
            }

            for(let i=0; i<5; i++)
            {
                //a태그 만들기
                const a=document.createElement("a");
                //a class 부여
                a.classList.add(`a${i}`);
                //json데이터의 url을 a에 넣기
                a.setAttribute("href", `${json[i].url}`);
                //div.div1에 넣기
                document.querySelector('.div1').appendChild(a);

                //div 생성 및 class="container" 부여
                const div=document.createElement("div");
                div.classList.add(`container${i}`);
                //a에 넣기
                document.querySelector(`.a${i}`).appendChild(div);

                //img 생성
                const img=document.createElement("img");
                //json데이터 중 포스터 이미지를 img에 넣기
                img.setAttribute('src', `${json[i].referenceIdentifier}`);
                //생성된 <img>를 div.container에 넣기
                document.querySelector(`.container${i}`).appendChild(img);

                //h1 생성
                const h3=document.createElement("h3");
                //json데이터 중 title을 h1으로 생성
                h3.innerHTML=`${json[i].title}`;
                //h1을 div.container에 넣기
                document.querySelector(`.container${i}`).appendChild(h3);

                //h3 장소
                const h5=document.createElement("h5");
                h5.innerHTML=`${json[i].spatialCoverage}`;
                document.querySelector(`.container${i}`).appendChild(h5);
            }       
        })();
    </script>
    
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=5060f3f585ad0d8585577b6c763663ea"></script>
    <script>
    var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
    mapOption = { 
        center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
        level: 3 // 지도의 확대 레벨
    };

    // 지도를 표시할 div와  지도 옵션으로  지도를 생성합니다
    var map = new kakao.maps.Map(mapContainer, mapOption); 
    </script>
</body>
</html>