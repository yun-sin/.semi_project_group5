<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- style.css link -->
    <link rel="stylesheet" href="./assets/assets-park/css/style.min.css">
    <!-- fontawesome link -->
    <script src="https://kit.fontawesome.com/4c1758484e.js" crossorigin="anonymous"></script>
    <!-- favicon -->
    <link rel="shortcut icon" href="./assets/favicon/bolt-solid.ico">
    <!-- title -->
    <title>문화충전</title>
</head>
<body>
    <!-- header -->
    <div data-include="./inc/header.html"></div>

        <!-- main -->
        <main>
            <!-- title section -->
            <section id="main_title">
                <!-- search icon -->
                <i id="search" class="fa-solid fa-magnifying-glass"></i><br>
                <!-- 메인 타이틀 -->
                <b>
                    <h1 id="title" class="hvr-grow">나에게 딱 맞는 공연을 추천해드립니다!</h1>
                </b>
                <!-- 서브 타이틀 -->
                <h5 id="sub_title">
                    지역별, 장르별 전국의 다양한 공연을 소개합니다.<br>
                    취향존중. 나만의 맞춤형 공연을 찾아보세요.
                </h5>
            </section>

            <!-- 오늘의 공연 -->
            <section id="main_today">
                <div id="today">

                </div>
            </section>

            <!-- 검색 버튼 -->
            <section id="main_button">
                <ul>
                    <li id="search_form" class="shadow border_r"><a href="#">나에게 딱 맞는 공연 찾아보기</a></li>
                    <li id="search_page" class="border_r"><a href="#">직접 검색해볼래요</a></li>
                </ul>
            </section>
        </main>

    <!-- footer -->
    <div data-include="./inc/footer.html"></div>

    <!-- axios -->
    <script src="../node_modules/axios/dist/axios.min.js"></script>
    <!-- header footer inclue -->
    <script src="./assets/js/include.js"></script>
    <!-- script -->
    <script type="module">
        // header logo hover animation class
        import logoanimation from "./assets/js/logo-animation.js";

        // KOPIS 공연목록 open api json datasets
        (async () => {
            
            let json = null;

            try {
                // test json
                const response = await axios.get('http://localhost:3001/response');
                json = response.data.body.items.item;
                // console.log(json);

                // api json
                /* const response = await axios.get('http://api.kcisa.kr/openapi/service/rest/meta16/getkopis01', {
                    params: {
                        serviceKey: "b5c0289f-a465-4bd4-bb80-37b3b12a1150",
                        numOfRows: 150,
                        pageNo: 1,
                    },
                    header: {
                        accept: "application/json",
                    },
                });
                json = response.data.response.body.items.item;
                console.log(json); */
            } catch (e) {
                console.error(e);
                alert('요청을 처리하는데 실패했습니다.');
                return;
            }

            // response.data.body.items.item 1번에서 14번까지 포스터를 img태그로 생성
            for (let i = 0; i < 14; i++) {
                const img = document.createElement('img');
                img.setAttribute('src', `${json[i].referenceIdentifier}`);
                img.classList.add('hvr-grow');
                document.querySelector("#today").appendChild(img);
            }
        })();

        // header logo hover animation 실행
        logoanimation.logoOver();
        logoanimation.logoOut();
    </script>
</body>
</html>

<!-- 공연 포스터 나열
json.forEach((v, i) => {
    const img = document.createElement('img');
    img.setAttribute('src', `${v.referenceIdentifier}`);
    const a = document.createElement('a');
    a.setAttribute('href', `${v.url}`);
    a.appendChild(img);
    console.log(img);
    document.querySelector("#show").appendChild(a);
});

// 오늘의 인기 공연
const img1 = document.createElement('img');
img1.setAttribute('src', `${json[0].referenceIdentifier}`);
console.log(img1);
document.querySelector("#today").appendChild(img1);
const title = document.createElement(''); -->